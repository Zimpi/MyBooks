@page "/"
@using Google.Apis.Books.v1.Data
@inject BooksService BookService
<MudText Typo="Typo.h6">Entdecke neue Bücher</MudText>

@if (Recommended != null && Recommended.Items.Count > 0)
{
    <MudGrid Justify="Justify.Center" Spacing="3">
        @foreach (var reco in Recommended.Items)
        {
            <MudItem>
                <MudImage Elevation="1" ObjectFit="ObjectFit.Cover" ObjectPosition="ObjectPosition.Center" Src="@reco.VolumeInfo.ImageLinks.Thumbnail" Width="128"></MudImage>
            </MudItem>
        }
    </MudGrid>

}
else
{
    <MudGrid Justify="Justify.Center" Spacing="3">
        <MudSkeleton Animation="Animation.Pulse" SkeletonType="SkeletonType.Rectangle" Width="128" Height="195px" />
        <MudSkeleton Animation="Animation.Pulse" SkeletonType="SkeletonType.Rectangle" Width="128" Height="195px" />
        <MudSkeleton Animation="Animation.Pulse" SkeletonType="SkeletonType.Rectangle" Width="128" Height="195px" />
        <MudSkeleton Animation="Animation.Pulse" SkeletonType="SkeletonType.Rectangle" Width="128" Height="195px" />
        <MudSkeleton Animation="Animation.Pulse" SkeletonType="SkeletonType.Rectangle" Width="128" Height="195px" />
        <MudSkeleton Animation="Animation.Pulse" SkeletonType="SkeletonType.Rectangle" Width="128" Height="195px" />
        <MudSkeleton Animation="Animation.Pulse" SkeletonType="SkeletonType.Rectangle" Width="128" Height="195px" />
        <MudSkeleton Animation="Animation.Pulse" SkeletonType="SkeletonType.Rectangle" Width="128" Height="195px" />
        <MudSkeleton Animation="Animation.Pulse" SkeletonType="SkeletonType.Rectangle" Width="128" Height="195px" />
        <MudSkeleton Animation="Animation.Pulse" SkeletonType="SkeletonType.Rectangle" Width="128" Height="195px" />
    </MudGrid>
}

@code {

    public Volumes? Recommended { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Thread.Sleep(2000);
        Recommended = await BookService.Volumes.Recommended.List().ExecuteAsync().ConfigureAwait(false);
    }
}