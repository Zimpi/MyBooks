@page "/"
@using Google.Apis.Books.v1.Data
@inject BooksService BookService
<MudText Typo="Typo.h6">Entdecke neue Bücher</MudText>

<AuthorizeView>
    <Authorized>
        @foreach (var claim in context.User.Claims)
        {
            <MudText>@claim.Type | @claim.Value</MudText>
        }
        
        <MudButton OnClick="LoadRecommended">Lade Recommended</MudButton>
    </Authorized>
</AuthorizeView>

<MudGrid Spacing="2" Justify="Justify.Center">
    @if (Books != null && Books.TotalItems > 0)
    {
        @foreach (var book in Books.Items)
        {
            <MudCard>
                <MudCardMedia Image="@book.VolumeInfo.ImageLinks.Thumbnail"/>
                <MudCardContent>
                    <MudText Typo="Typo.h6">@book.VolumeInfo.Title</MudText>
                </MudCardContent>
                <MudCardActions>
                    <MudButton StartIcon="@Icons.Material.Filled.Info" Variant="Variant.Text" Color="Color.Primary">Infos</MudButton>
                </MudCardActions>
            </MudCard>
        }
    }
    
</MudGrid>

@code{

    public Volumes? Recommended { get; set; }


    protected override async Task OnInitializedAsync()
    {
            
    }

    public Volumes? Books { get; set; }

    private async Task LoadRecommended()
    {
        Recommended = await BookService.Volumes.Recommended.List().ExecuteAsync();
    }

}